"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const react=require("react");var _a,_b;const useIsomorphicLayoutEffect=typeof window!="undefined"&&((_a=window.document)!=null&&_a.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?react.useLayoutEffect:react.useEffect;function traverseFiber(n,t,e){if(!n)return;if(e(n)===!0)return n;let r=t?n.return:n.child;for(;r;){const o=traverseFiber(r,t,e);if(o)return o;r=t?null:r.sibling}}const FiberProvider=react.Fragment;function useFiber(){const n=react.useRef();return react.useState(()=>{const t=Function.prototype.bind;Function.prototype.bind=function(e,r){return e===null&&typeof(r==null?void 0:r.type)=="function"&&(n.current=r,Function.prototype.bind=t),t.apply(this,arguments)}}),n.current}function useContainer(){const n=useFiber(),t=react.useMemo(()=>traverseFiber(n,!0,e=>{var r;return((r=e.stateNode)==null?void 0:r.containerInfo)!=null}),[n]);return t==null?void 0:t.stateNode.containerInfo}function useNearestChild(n){const t=useFiber(),e=react.useRef();return useIsomorphicLayoutEffect(()=>{var r;e.current=(r=traverseFiber(t,!1,o=>typeof o.type=="string"&&(n===void 0||o.type===n)))==null?void 0:r.stateNode},[t]),e}function useNearestParent(n){const t=useFiber(),e=react.useRef();return useIsomorphicLayoutEffect(()=>{var r;e.current=(r=traverseFiber(t,!0,o=>typeof o.type=="string"&&(n===void 0||o.type===n)))==null?void 0:r.stateNode},[t]),e}function useContextMap(){const n=useFiber(),[t]=react.useState(()=>new Map);t.clear();let e=n;for(;e;){if(e.type&&typeof e.type=="object"){const o=e.type._context===void 0&&e.type.Provider===e.type?e.type:e.type._context;o&&!t.has(o)&&t.set(o,o._currentValue)}e=e.return}return t}function useContextBridge(){const n=useContextMap();return react.useMemo(()=>({children:t})=>{for(const[e,r]of n)t=react.createElement(e.Provider,{value:r},t);return t},[n])}exports.FiberProvider=FiberProvider,exports.traverseFiber=traverseFiber,exports.useContainer=useContainer,exports.useContextBridge=useContextBridge,exports.useContextMap=useContextMap,exports.useFiber=useFiber,exports.useNearestChild=useNearestChild,exports.useNearestParent=useNearestParent;
//# sourceMappingURL=index.cjs.map
